# =============================================================================
# Flink Configuration for Production Deployment
# =============================================================================

# JobManager Configuration
jobmanager.rpc.address: flink-jobmanager
jobmanager.rpc.port: 6123
jobmanager.memory.process.size: 2048m
jobmanager.execution.failover-strategy: region

# TaskManager Configuration
taskmanager.numberOfTaskSlots: 8
taskmanager.memory.process.size: 4096m
taskmanager.memory.managed.fraction: 0.4
taskmanager.memory.network.fraction: 0.1
taskmanager.memory.network.min: 64mb
taskmanager.memory.network.max: 1gb

# Parallelism
parallelism.default: 8

# State Backend (RocksDB for production)
state.backend: rocksdb
state.backend.rocksdb.memory.managed: true
state.backend.rocksdb.memory.fixed-per-slot: 256mb
state.backend.incremental: true

# Checkpointing
execution.checkpointing.interval: 60000
execution.checkpointing.mode: EXACTLY_ONCE
execution.checkpointing.min-pause: 30000
execution.checkpointing.timeout: 600000
execution.checkpointing.max-concurrent-checkpoints: 1
execution.checkpointing.tolerable-failed-checkpoints: 3
execution.checkpointing.externalized-checkpoint-retention: RETAIN_ON_CANCELLATION

# State directories (configure for production storage)
state.checkpoints.dir: file:///tmp/flink-checkpoints
state.savepoints.dir: file:///tmp/flink-savepoints

# High Availability (enable for production)
# high-availability: kubernetes
# high-availability.storageDir: s3://your-bucket/flink/ha
# kubernetes.cluster-id: fraud-detection-cluster

# Restart Strategy
restart-strategy: fixed-delay
restart-strategy.fixed-delay.attempts: 3
restart-strategy.fixed-delay.delay: 10s

# Web UI
rest.port: 8081
rest.address: 0.0.0.0
rest.bind-address: 0.0.0.0
web.upload.dir: /tmp

# Metrics
metrics.reporters: prom
metrics.reporter.prom.factory.class: org.apache.flink.metrics.prometheus.PrometheusReporterFactory
metrics.reporter.prom.port: 9999

# Logging
env.log.dir: /opt/flink/log
env.log.max: 5

# Security (enable for production)
# security.ssl.internal.enabled: true
# security.ssl.rest.enabled: true

# Network
taskmanager.network.memory.floating-buffers-per-gate: 8
taskmanager.network.request-backoff.initial: 100
taskmanager.network.request-backoff.max: 10000

# Heartbeat
heartbeat.interval: 10000
heartbeat.timeout: 50000

# Akka
akka.ask.timeout: 60s
akka.watch.heartbeat.interval: 10s
akka.watch.heartbeat.pause: 60s


